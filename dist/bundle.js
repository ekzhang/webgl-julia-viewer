!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e,n){e.exports="attribute vec2 a_position;\n\nvoid main() {\n  gl_Position = vec4(a_position, 0.0, 1.0);\n}\n"},function(e,n){e.exports="/* Modified from: https://gpfault.net/posts/mandelbrot-webgl.txt.html */\n\n/* Fragment shader that renders Mandelbrot set */\nprecision highp float;\n\n/* Width and height of screen in pixels */\nuniform vec2 u_resolution;\n\n/* Point on the complex plane that will be mapped to the center of the screen */\nuniform vec2 u_zoomCenter;\n\n/* Distance between left and right edges of the screen. This essentially specifies\n   which points on the plane are mapped to left and right edges of the screen.\n  Together, u_zoomCenter and u_zoomSize determine which piece of the complex\n   plane is displayed. */\nuniform float u_zoomSize;\n\n/* How many iterations to do before deciding that a point is in the set. */\nuniform int u_maxIterations;\n\n/* Constant c for the Julia set quadratic polynomial. */\nuniform vec2 u_juliaConstant;\n\nvec2 sq(vec2 z) {\n  return mat2(z, -z.y, z.x) * z;\n}\n\nvec2 f(vec2 z, vec2 c) {\n\treturn sq(z) + c;\n}\n\nvec3 palette(float x) {\n  float CONTROL_X[6];\n  CONTROL_X[0] = 0.0;\n  CONTROL_X[1] = 0.16;\n  CONTROL_X[2] = 0.42;\n  CONTROL_X[3] = 0.6425;\n  CONTROL_X[4] = 0.8575;\n  CONTROL_X[5] = 1.0;\n  vec3 CONTROL_C[6];\n  CONTROL_C[0] = vec3(0.0, 7.0, 100.0);\n  CONTROL_C[1] = vec3(32.0, 107.0, 203.0);\n  CONTROL_C[2] = vec3(237.0, 255.0, 255.0);\n  CONTROL_C[3] = vec3(255.0, 170.0, 0.0);\n  CONTROL_C[4] = vec3(0.0, 2.0, 0.0);\n  CONTROL_C[5] = vec3(0.0, 7.0, 100.0);\n\n  for (int i = 0; i < 5; i++) {\n    if (CONTROL_X[i + 1] >= x) {\n      float k = (x - CONTROL_X[i]) / (CONTROL_X[i + 1] - CONTROL_X[i]);\n      vec3 c1 = CONTROL_C[i];\n      vec3 c2 = CONTROL_C[i + 1];\n      return ((1.0 - k) * c1 + k * c2) / 256.0;\n    }\n  }\n\n  // This should not be executed\n  return vec3(0.0);\n}\n\nvoid main() {\n  vec2 uv = gl_FragCoord.xy / u_resolution;\n\n  /* Decide which point on the complex plane this fragment corresponds to.*/\n  vec2 z = (uv - vec2(0.5)) * u_zoomSize;\n  z.y *= u_resolution.y / u_resolution.x;\n  z += u_zoomCenter;\n\n  vec2 c = u_juliaConstant;\n  float smoothColor = 0.0;\n  for (int i = 0; i < 10000; i++) {\n    if (i >= u_maxIterations) break;\n    float norm = length(z);\n    smoothColor += exp(-norm);\n    if (norm > 30.0)\n      break;\n    z = f(z, c);\n  }\n  smoothColor /= float(u_maxIterations);\n  smoothColor = fract(smoothColor * 10.0);\n  gl_FragColor = vec4(palette(smoothColor), 1.0);\n}\n"},function(e,n,t){"use strict";t.r(n);var o=t(1),r=t.n(o),i=t(0),a=t.n(i),c=document.querySelector("#glCanvas");function u(){c.width=window.innerWidth,c.height=window.innerHeight}u(),window.addEventListener("resize",u);var l=c.getContext("webgl");null===l&&alert("Unable to initialize WebGL. Your browser or machine may not support it.");var s=l.createShader(l.VERTEX_SHADER),f=l.createShader(l.FRAGMENT_SHADER);l.shaderSource(s,a.a),l.shaderSource(f,r.a),l.compileShader(s),l.compileShader(f);var d=l.createProgram();l.attachShader(d,s),l.attachShader(d,f),l.linkProgram(d),l.useProgram(d);var h=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,h),l.bufferData(l.ARRAY_BUFFER,new Float32Array([-1,1,-1,-1,1,1,1,1,-1,-1,1,-1]),l.STATIC_DRAW);var m=l.getAttribLocation(d,"a_position");l.enableVertexAttribArray(m),l.vertexAttribPointer(m,2,l.FLOAT,!1,0,0);var v=l.getUniformLocation(d,"u_maxIterations"),_=l.getUniformLocation(d,"u_resolution"),p=l.getUniformLocation(d,"u_zoomCenter"),C=l.getUniformLocation(d,"u_zoomSize"),O=l.getUniformLocation(d,"u_juliaConstant"),g=[-.76,.22],b=4,L=[0,0];function R(e,n){return e=e/c.width-.5,n=(c.height-1-n)/c.height-.5,n*=c.height/c.width,[e=e*b+L[0],n=n*b+L[1]]}var T=!1;c.addEventListener("mousedown",function(e){T=!0,g=R(e.clientX,e.clientY)}),c.addEventListener("mousemove",function(e){T&&(g=R(e.clientX,e.clientY))}),c.addEventListener("mouseup",function(e){T=!1}),function e(){l.viewport(0,0,l.canvas.width,l.canvas.height),l.uniform1i(v,512),l.uniform2fv(_,[c.width,c.height]),l.uniform2fv(p,L),l.uniform1f(C,b),l.uniform2fv(O,g),l.drawArrays(l.TRIANGLES,0,6),requestAnimationFrame(e)}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc2hhZGVycy92U2hhZGVyLmdsc2wiLCJ3ZWJwYWNrOi8vLy4vc2hhZGVycy9mU2hhZGVyLmdsc2wiLCJ3ZWJwYWNrOi8vLy4vaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJjYW52YXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJyZXNpemUiLCJ3aWR0aCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJoZWlnaHQiLCJpbm5lckhlaWdodCIsImFkZEV2ZW50TGlzdGVuZXIiLCJnbCIsImdldENvbnRleHQiLCJhbGVydCIsInZTaGFkZXIiLCJjcmVhdGVTaGFkZXIiLCJWRVJURVhfU0hBREVSIiwiZlNoYWRlciIsIkZSQUdNRU5UX1NIQURFUiIsInNoYWRlclNvdXJjZSIsIl9zaGFkZXJzX3ZTaGFkZXJfZ2xzbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQiLCJhIiwiX3NoYWRlcnNfZlNoYWRlcl9nbHNsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCIsImNvbXBpbGVTaGFkZXIiLCJwcm9ncmFtIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwidXNlUHJvZ3JhbSIsImJ1ZmZlciIsImNyZWF0ZUJ1ZmZlciIsImJpbmRCdWZmZXIiLCJBUlJBWV9CVUZGRVIiLCJidWZmZXJEYXRhIiwiRmxvYXQzMkFycmF5IiwiU1RBVElDX0RSQVciLCJwb3NpdGlvbkxvY2F0aW9uIiwiZ2V0QXR0cmliTG9jYXRpb24iLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsInZlcnRleEF0dHJpYlBvaW50ZXIiLCJGTE9BVCIsIm1heEl0ZXJhdGlvbkxvYyIsImdldFVuaWZvcm1Mb2NhdGlvbiIsInJlc29sdXRpb25Mb2MiLCJ6b29tQ2VudGVyTG9jIiwiem9vbVNpemVMb2MiLCJqdWxpYUNvbnN0YW50TG9jIiwibG9jIiwiem9vbVNpemUiLCJ6b29tQ2VudGVyIiwiY29vcmRzVG9Qb2ludCIsIngiLCJ5IiwibW91c2VEb3duIiwiZSIsImNsaWVudFgiLCJjbGllbnRZIiwicmVuZGVyRnJhbWUiLCJ2aWV3cG9ydCIsInVuaWZvcm0xaSIsInVuaWZvcm0yZnYiLCJ1bmlmb3JtMWYiLCJkcmF3QXJyYXlzIiwiVFJJQU5HTEVTIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNB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LEVBQ0FwRCxFQUFBUyxpQkFBQSxxQkFBQTRDLEdBQ0FELEdBQUEsRUFDQU4sRUFBQUcsRUFBQUksRUFBQUMsUUFBQUQsRUFBQUUsV0FFQXZELEVBQUFTLGlCQUFBLHFCQUFBNEMsR0FDQUQsSUFDQU4sRUFBQUcsRUFBQUksRUFBQUMsUUFBQUQsRUFBQUUsWUFHQXZELEVBQUFTLGlCQUFBLG1CQUFBNEMsR0FDQUQsR0FBQSxJQUVBLFNBQUFJLElBRUE5QyxFQUFBK0MsU0FBQSxJQUFBL0MsRUFBQVYsT0FBQUksTUFBQU0sRUFBQVYsT0FBQU8sUUFFQUcsRUFBQWdELFVBQUFsQixFQUFBLEtBQ0E5QixFQUFBaUQsV0FBQWpCLEdBQUExQyxFQUFBSSxNQUFBSixFQUFBTyxTQUNBRyxFQUFBaUQsV0FBQWhCLEVBQUFLLEdBQ0F0QyxFQUFBa0QsVUFBQWhCLEVBQUFHLEdBQ0FyQyxFQUFBaUQsV0FBQWQsRUFBQUMsR0FJQXBDLEVBQUFtRCxXQUFBbkQsRUFBQW9ELFVBQUEsS0FDQUMsc0JBQUFQLEdBRUFBIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gXCJhdHRyaWJ1dGUgdmVjMiBhX3Bvc2l0aW9uO1xcblxcbnZvaWQgbWFpbigpIHtcXG4gIGdsX1Bvc2l0aW9uID0gdmVjNChhX3Bvc2l0aW9uLCAwLjAsIDEuMCk7XFxufVxcblwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIi8qIE1vZGlmaWVkIGZyb206IGh0dHBzOi8vZ3BmYXVsdC5uZXQvcG9zdHMvbWFuZGVsYnJvdC13ZWJnbC50eHQuaHRtbCAqL1xcblxcbi8qIEZyYWdtZW50IHNoYWRlciB0aGF0IHJlbmRlcnMgTWFuZGVsYnJvdCBzZXQgKi9cXG5wcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxuXFxuLyogV2lkdGggYW5kIGhlaWdodCBvZiBzY3JlZW4gaW4gcGl4ZWxzICovXFxudW5pZm9ybSB2ZWMyIHVfcmVzb2x1dGlvbjtcXG5cXG4vKiBQb2ludCBvbiB0aGUgY29tcGxleCBwbGFuZSB0aGF0IHdpbGwgYmUgbWFwcGVkIHRvIHRoZSBjZW50ZXIgb2YgdGhlIHNjcmVlbiAqL1xcbnVuaWZvcm0gdmVjMiB1X3pvb21DZW50ZXI7XFxuXFxuLyogRGlzdGFuY2UgYmV0d2VlbiBsZWZ0IGFuZCByaWdodCBlZGdlcyBvZiB0aGUgc2NyZWVuLiBUaGlzIGVzc2VudGlhbGx5IHNwZWNpZmllc1xcbiAgIHdoaWNoIHBvaW50cyBvbiB0aGUgcGxhbmUgYXJlIG1hcHBlZCB0byBsZWZ0IGFuZCByaWdodCBlZGdlcyBvZiB0aGUgc2NyZWVuLlxcbiAgVG9nZXRoZXIsIHVfem9vbUNlbnRlciBhbmQgdV96b29tU2l6ZSBkZXRlcm1pbmUgd2hpY2ggcGllY2Ugb2YgdGhlIGNvbXBsZXhcXG4gICBwbGFuZSBpcyBkaXNwbGF5ZWQuICovXFxudW5pZm9ybSBmbG9hdCB1X3pvb21TaXplO1xcblxcbi8qIEhvdyBtYW55IGl0ZXJhdGlvbnMgdG8gZG8gYmVmb3JlIGRlY2lkaW5nIHRoYXQgYSBwb2ludCBpcyBpbiB0aGUgc2V0LiAqL1xcbnVuaWZvcm0gaW50IHVfbWF4SXRlcmF0aW9ucztcXG5cXG4vKiBDb25zdGFudCBjIGZvciB0aGUgSnVsaWEgc2V0IHF1YWRyYXRpYyBwb2x5bm9taWFsLiAqL1xcbnVuaWZvcm0gdmVjMiB1X2p1bGlhQ29uc3RhbnQ7XFxuXFxudmVjMiBzcSh2ZWMyIHopIHtcXG4gIHJldHVybiBtYXQyKHosIC16LnksIHoueCkgKiB6O1xcbn1cXG5cXG52ZWMyIGYodmVjMiB6LCB2ZWMyIGMpIHtcXG5cXHRyZXR1cm4gc3EoeikgKyBjO1xcbn1cXG5cXG52ZWMzIHBhbGV0dGUoZmxvYXQgeCkge1xcbiAgZmxvYXQgQ09OVFJPTF9YWzZdO1xcbiAgQ09OVFJPTF9YWzBdID0gMC4wO1xcbiAgQ09OVFJPTF9YWzFdID0gMC4xNjtcXG4gIENPTlRST0xfWFsyXSA9IDAuNDI7XFxuICBDT05UUk9MX1hbM10gPSAwLjY0MjU7XFxuICBDT05UUk9MX1hbNF0gPSAwLjg1NzU7XFxuICBDT05UUk9MX1hbNV0gPSAxLjA7XFxuICB2ZWMzIENPTlRST0xfQ1s2XTtcXG4gIENPTlRST0xfQ1swXSA9IHZlYzMoMC4wLCA3LjAsIDEwMC4wKTtcXG4gIENPTlRST0xfQ1sxXSA9IHZlYzMoMzIuMCwgMTA3LjAsIDIwMy4wKTtcXG4gIENPTlRST0xfQ1syXSA9IHZlYzMoMjM3LjAsIDI1NS4wLCAyNTUuMCk7XFxuICBDT05UUk9MX0NbM10gPSB2ZWMzKDI1NS4wLCAxNzAuMCwgMC4wKTtcXG4gIENPTlRST0xfQ1s0XSA9IHZlYzMoMC4wLCAyLjAsIDAuMCk7XFxuICBDT05UUk9MX0NbNV0gPSB2ZWMzKDAuMCwgNy4wLCAxMDAuMCk7XFxuXFxuICBmb3IgKGludCBpID0gMDsgaSA8IDU7IGkrKykge1xcbiAgICBpZiAoQ09OVFJPTF9YW2kgKyAxXSA+PSB4KSB7XFxuICAgICAgZmxvYXQgayA9ICh4IC0gQ09OVFJPTF9YW2ldKSAvIChDT05UUk9MX1hbaSArIDFdIC0gQ09OVFJPTF9YW2ldKTtcXG4gICAgICB2ZWMzIGMxID0gQ09OVFJPTF9DW2ldO1xcbiAgICAgIHZlYzMgYzIgPSBDT05UUk9MX0NbaSArIDFdO1xcbiAgICAgIHJldHVybiAoKDEuMCAtIGspICogYzEgKyBrICogYzIpIC8gMjU2LjA7XFxuICAgIH1cXG4gIH1cXG5cXG4gIC8vIFRoaXMgc2hvdWxkIG5vdCBiZSBleGVjdXRlZFxcbiAgcmV0dXJuIHZlYzMoMC4wKTtcXG59XFxuXFxudm9pZCBtYWluKCkge1xcbiAgdmVjMiB1diA9IGdsX0ZyYWdDb29yZC54eSAvIHVfcmVzb2x1dGlvbjtcXG5cXG4gIC8qIERlY2lkZSB3aGljaCBwb2ludCBvbiB0aGUgY29tcGxleCBwbGFuZSB0aGlzIGZyYWdtZW50IGNvcnJlc3BvbmRzIHRvLiovXFxuICB2ZWMyIHogPSAodXYgLSB2ZWMyKDAuNSkpICogdV96b29tU2l6ZTtcXG4gIHoueSAqPSB1X3Jlc29sdXRpb24ueSAvIHVfcmVzb2x1dGlvbi54O1xcbiAgeiArPSB1X3pvb21DZW50ZXI7XFxuXFxuICB2ZWMyIGMgPSB1X2p1bGlhQ29uc3RhbnQ7XFxuICBmbG9hdCBzbW9vdGhDb2xvciA9IDAuMDtcXG4gIGZvciAoaW50IGkgPSAwOyBpIDwgMTAwMDA7IGkrKykge1xcbiAgICBpZiAoaSA+PSB1X21heEl0ZXJhdGlvbnMpIGJyZWFrO1xcbiAgICBmbG9hdCBub3JtID0gbGVuZ3RoKHopO1xcbiAgICBzbW9vdGhDb2xvciArPSBleHAoLW5vcm0pO1xcbiAgICBpZiAobm9ybSA+IDMwLjApXFxuICAgICAgYnJlYWs7XFxuICAgIHogPSBmKHosIGMpO1xcbiAgfVxcbiAgc21vb3RoQ29sb3IgLz0gZmxvYXQodV9tYXhJdGVyYXRpb25zKTtcXG4gIHNtb290aENvbG9yID0gZnJhY3Qoc21vb3RoQ29sb3IgKiAxMC4wKTtcXG4gIGdsX0ZyYWdDb2xvciA9IHZlYzQocGFsZXR0ZShzbW9vdGhDb2xvciksIDEuMCk7XFxufVxcblwiIiwiaW1wb3J0IGZTaGFkZXJTb3VyY2UgZnJvbSBcIi4vc2hhZGVycy9mU2hhZGVyLmdsc2xcIjtcbmltcG9ydCB2U2hhZGVyU291cmNlIGZyb20gXCIuL3NoYWRlcnMvdlNoYWRlci5nbHNsXCI7XG52YXIgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNnbENhbnZhc1wiKTtcbi8vIEF1dG9tYXRpYyBjYW52YXMgcmVzaXppbmdcbmZ1bmN0aW9uIHJlc2l6ZSgpIHtcbiAgICBjYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xufVxucmVzaXplKCk7XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCByZXNpemUpO1xudmFyIGdsID0gY2FudmFzLmdldENvbnRleHQoXCJ3ZWJnbFwiKTtcbmlmIChnbCA9PT0gbnVsbCkge1xuICAgIGFsZXJ0KFwiVW5hYmxlIHRvIGluaXRpYWxpemUgV2ViR0wuIFlvdXIgYnJvd3NlciBvciBtYWNoaW5lIG1heSBub3Qgc3VwcG9ydCBpdC5cIik7XG59XG4vLyBDb21waWxlIGFuZCBsaW5rIHNoYWRlcnNcbnZhciB2U2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKGdsLlZFUlRFWF9TSEFERVIpO1xudmFyIGZTaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuRlJBR01FTlRfU0hBREVSKTtcbmdsLnNoYWRlclNvdXJjZSh2U2hhZGVyLCB2U2hhZGVyU291cmNlKTtcbmdsLnNoYWRlclNvdXJjZShmU2hhZGVyLCBmU2hhZGVyU291cmNlKTtcbmdsLmNvbXBpbGVTaGFkZXIodlNoYWRlcik7XG5nbC5jb21waWxlU2hhZGVyKGZTaGFkZXIpO1xudmFyIHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XG5nbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgdlNoYWRlcik7XG5nbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgZlNoYWRlcik7XG5nbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcbmdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7XG4vLyBTZXQgcG9zaXRpb25zXG52YXIgYnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG52YXIgdmVydGljZXMgPSBbLTEsIDEsIC0xLCAtMSwgMSwgMSxcbiAgICAxLCAxLCAtMSwgLTEsIDEsIC0xXTtcbmdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXIpO1xuZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkodmVydGljZXMpLCBnbC5TVEFUSUNfRFJBVyk7XG52YXIgcG9zaXRpb25Mb2NhdGlvbiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIFwiYV9wb3NpdGlvblwiKTtcbmdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHBvc2l0aW9uTG9jYXRpb24pO1xuZ2wudmVydGV4QXR0cmliUG9pbnRlcihwb3NpdGlvbkxvY2F0aW9uLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xudmFyIG1heEl0ZXJhdGlvbkxvYyA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcInVfbWF4SXRlcmF0aW9uc1wiKTtcbnZhciByZXNvbHV0aW9uTG9jID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIFwidV9yZXNvbHV0aW9uXCIpO1xudmFyIHpvb21DZW50ZXJMb2MgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJ1X3pvb21DZW50ZXJcIik7XG52YXIgem9vbVNpemVMb2MgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJ1X3pvb21TaXplXCIpO1xudmFyIGp1bGlhQ29uc3RhbnRMb2MgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJ1X2p1bGlhQ29uc3RhbnRcIik7XG52YXIgbG9jID0gWy0wLjc2LCAwLjIyXTtcbnZhciB6b29tU2l6ZSA9IDQuMDtcbnZhciB6b29tQ2VudGVyID0gWzAsIDBdO1xuZnVuY3Rpb24gY29vcmRzVG9Qb2ludCh4LCB5KSB7XG4gICAgeCA9IHggLyBjYW52YXMud2lkdGggLSAwLjU7XG4gICAgeSA9IChjYW52YXMuaGVpZ2h0IC0gMSAtIHkpIC8gY2FudmFzLmhlaWdodCAtIDAuNTtcbiAgICB5ICo9IGNhbnZhcy5oZWlnaHQgLyBjYW52YXMud2lkdGg7XG4gICAgeCA9IHggKiB6b29tU2l6ZSArIHpvb21DZW50ZXJbMF07XG4gICAgeSA9IHkgKiB6b29tU2l6ZSArIHpvb21DZW50ZXJbMV07XG4gICAgcmV0dXJuIFt4LCB5XTtcbn1cbnZhciBtb3VzZURvd24gPSBmYWxzZTtcbmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgbW91c2VEb3duID0gdHJ1ZTtcbiAgICBsb2MgPSBjb29yZHNUb1BvaW50KGUuY2xpZW50WCwgZS5jbGllbnRZKTtcbn0pO1xuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAobW91c2VEb3duKSB7XG4gICAgICAgIGxvYyA9IGNvb3Jkc1RvUG9pbnQoZS5jbGllbnRYLCBlLmNsaWVudFkpO1xuICAgIH1cbn0pO1xuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgbW91c2VEb3duID0gZmFsc2U7XG59KTtcbmZ1bmN0aW9uIHJlbmRlckZyYW1lKCkge1xuICAgIC8vIEFsbG93IHJlc2l6aW5nXG4gICAgZ2wudmlld3BvcnQoMCwgMCwgZ2wuY2FudmFzLndpZHRoLCBnbC5jYW52YXMuaGVpZ2h0KTtcbiAgICAvLyBTZXQgdW5pZm9ybXNcbiAgICBnbC51bmlmb3JtMWkobWF4SXRlcmF0aW9uTG9jLCA1MTIpO1xuICAgIGdsLnVuaWZvcm0yZnYocmVzb2x1dGlvbkxvYywgW2NhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodF0pO1xuICAgIGdsLnVuaWZvcm0yZnYoem9vbUNlbnRlckxvYywgem9vbUNlbnRlcik7XG4gICAgZ2wudW5pZm9ybTFmKHpvb21TaXplTG9jLCB6b29tU2l6ZSk7XG4gICAgZ2wudW5pZm9ybTJmdihqdWxpYUNvbnN0YW50TG9jLCBsb2MpO1xuICAgIC8vIERyYXdcbiAgICAvLyBnbC5jbGVhckNvbG9yKDAuMCwgMC4wLCAwLjAsIDEuMCk7XG4gICAgLy8gZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XG4gICAgZ2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRVMsIDAsIDYpO1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShyZW5kZXJGcmFtZSk7XG59XG5yZW5kZXJGcmFtZSgpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==